<!--
  ~ Copyright (C) 2018 The Delphi Team.
  ~ See the LICENCE file distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~ http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->
<div *ngIf="dataSource.data.length == 0; else tableBlock">
    There are currently no instances running.
</div>
<ng-template #tableBlock>
    <div class="container">
        <mat-form-field>
            <input id="filterData" matInput (keyup)="applyFilter($event.target.value)" placeholder="Filter">
        </mat-form-field>
        <mat-table class="mat-elevation-z8 mat-table" [dataSource]="dataSource">
            <ng-container matColumnDef="ID">
                <mat-header-cell *matHeaderCellDef> ID </mat-header-cell>
                <mat-cell *matCellDef="let element"> {{element.id}} </mat-cell>
            </ng-container>

            <ng-container matColumnDef="name">
                <mat-header-cell *matHeaderCellDef> Name </mat-header-cell>
                <mat-cell [ngClass]="'customWidthClass'" *matCellDef="let element"> {{element.name}} </mat-cell>
            </ng-container>

            <ng-container matColumnDef="host">
                <mat-header-cell *matHeaderCellDef> Host </mat-header-cell>
                <mat-cell [ngClass]="'customWidthClass'" *matCellDef="let element"> {{element.host}} </mat-cell>
            </ng-container>

            <ng-container matColumnDef="portNumber">
                <mat-header-cell *matHeaderCellDef> Port </mat-header-cell>
                <mat-cell *matCellDef="let element"> {{element.portNumber}} </mat-cell>
            </ng-container>

            <ng-container matColumnDef="instanceState">
                <mat-header-cell *matHeaderCellDef> State </mat-header-cell>
                <mat-cell *matCellDef="let element"> {{element.instanceState}} </mat-cell>
            </ng-container>

          <ng-container matColumnDef="action">
              <mat-header-cell [ngClass]="'customWidthClass'"  *matHeaderCellDef> Action </mat-header-cell>
                    <mat-cell [ngClass]="'customWidthClass'" *matCellDef="let element; let i=index; let row;" >
                            <div *ngIf="!element.dockerId; else actions">
                                Instance not hosted with docker.
                            </div>
                            <ng-template #actions>
                                <button [disabled]="!(element.instanceState==='Stopped')"  mat-icon-button (click)= startInstance(element.id) matTooltip="Start">
                                    <mat-icon aria-label="play_circle_filled_white">play_circle_filled_white</mat-icon>
                                </button>
                                <button [disabled]="!(element.instanceState==='Running')"  mat-icon-button (click)= stopInstance(element.id) matTooltip="Stop">
                                <mat-icon aria-label="stop">stop</mat-icon>
                                </button>
                                <button [disabled]="!(element.instanceState==='Running')" mat-icon-button (click)= pauseInstance(element.id) matTooltip="Pause">
                                    <mat-icon aria-label="pause_circle_outline">pause_circle_outline</mat-icon>
                                </button>
                                <button [disabled]="!(element.instanceState==='Paused')" mat-icon-button (click)= resumeInstance(element.id) matTooltip="Resume">
                                <mat-icon aria-label="play_circle_outline">play_circle_outline</mat-icon>
                                </button>
                                <button [disabled]="!(element.instanceState==='Stopped')" id="deleteButton" (click)="openDeleteDialog(i,row, element.id)" mat-icon-button matTooltip="Delete">
                                    <mat-icon aria-label="delete" id="deleteButton" >delete</mat-icon>
                                </button>
                            </ng-template>
                    </mat-cell>

            </ng-container>

            <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
            <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
        </mat-table>
    </div>
</ng-template>

<mat-paginator class="paginator" [pageSizeOptions]="[5, 10, 20]"></mat-paginator>

<div class="button-row">
    <button mat-raised-button color="primary" id="addButton" (click)="openAddDialog()">Add Instance</button>
</div>
